{
  "$Version": "4.0",
  "$Reference": {
    "https://sap.github.io/odata-vocabularies/vocabularies/Analytics.json": {
      "$Include": [{ "$Namespace": "com.sap.vocabularies.Analytics.v1", "$Alias": "Analytics" }]
    },
    "https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.json": {
      "$Include": [{ "$Namespace": "Org.OData.Aggregation.V1", "$Alias": "Aggregation" }]
    }
  },
  "example.Analytics.AggregateEntity": {
    "$Alias": "SalesModel",
    "Customer": {
      "$Kind": "EntityType",
      "$Key": ["ID"],
      "ID": {},
      "Name": { "$Nullable": true },
      "Country": { "$Nullable": true }
    },
    "Product": {
      "$Kind": "EntityType",
      "$Key": ["ID"],
      "ID": {},
      "Name": { "$Nullable": true },
      "Color": { "$Nullable": true },
      "TaxRate": { "$Type": "Edm.Decimal", "$Nullable": true, "$Scale": 2 }
    },
    "Sale": {
      "$Kind": "EntityType",
      "$Key": ["ID"],
      "ID": {},
      "Amount": { "$Type": "Edm.Decimal", "$Nullable": true, "$Scale": 2 },
      "Product": { "$Kind": "NavigationProperty", "$Type": "SalesModel.Product", "$Nullable": true },
      "Customer": { "$Kind": "NavigationProperty", "$Type": "SalesModel.Customer", "$Nullable": true }
    },
    "UpdateAggregateSales": [
      {
        "$Kind": "Action",
        "@Core.Description": "Updates an aggregate entity in the `Sales` entity set",
        "$Parameter": [
          { "$Name": "Aggregate", "@Core.Description": "String identifying the aggregate entity to be updated" },
          {
            "$Name": "Updates",
            "$Type": "SalesModel.Sale",
            "@Core.Description": "Aggregate entity with nested properties that are to be updated, like the body of a PATCH request"
          }
        ],
        "$ReturnType": { "$Type": "SalesModel.Sale", "@Core.Description": "Aggregate entity with updates applied" }
      }
    ],
    "RetrieveAggregateSales": [
      {
        "$Kind": "Function",
        "@Core.Description": "Retrieves an aggregate entity in the `Sales` entity set",
        "$Parameter": [
          { "$Name": "Aggregate", "@Core.Description": "String identifying the aggregate entity to be retrieved" }
        ],
        "$ReturnType": { "$Type": "SalesModel.Sale" }
      }
    ],
    "container": {
      "$Kind": "EntityContainer",
      "Sales": {
        "$Collection": true,
        "$Type": "SalesModel.Sale",
        "@Aggregation.CustomAggregate#Amount": "Edm.Decimal"
      },
      "UpdateAggregateSales": { "$Action": "SalesModel.UpdateAggregateSales", "$EntitySet": "Sales" },
      "RetrieveAggregateSales": { "$Function": "SalesModel.RetrieveAggregateSales", "$EntitySet": "Sales" }
    }
  },
  "$EntityContainer": "example.Analytics.AggregateEntity.container"
}
